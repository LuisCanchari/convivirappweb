<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="edu.cientifica.convivir.mappers.UsuarioMappers">
	<resultMap id="usuarioResultMap"
		type="edu.cientifica.convivir.model.Usuario"
		extends="edu.cientifica.convivir.mappers.PersonaMapper.personaResultMap">
		<id column="id" property="" />
		<result column="username" property="username" />
		<result column="password" property="password" />
		<result column="email" property="correo" />
		<association column="id_usuario" property="uinmobiliaria"
			javaType="edu.cientifica.convivir.model.UInmobiliaria"
			resultMap="edu.cientifica.convivir.mappers.UInmobiliariaMapper.uinmobiliariaResultMap" />
	</resultMap>

	<select id="selectUsuarioPorUsername"
		resultMap="usuarioResultMap">
		SELECT p.id_persona, u.username, u.password, u.email,
		p.tipo_documento, p.num_documento, p.nombre, p.primer_apellido,
		p.segundo_apellido, f.id_tipo_perfil, f.id_uinmobiliaria
		FROM usuario u
		INNER JOIN persona p
		ON p.id_persona = u.id_usuario
		INNER JOIN perfil f
		ON u.id_usuario = f.id_usuario
		WHERE u.username = 'hugo';


	</select>


</mapper>

